(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdcfc"],{"2e1d":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"addController"},[e._v(" "+e._s(e.arr)+" "),s("div",[s("b-row",{staticClass:"p-2"},[s("b-col",[s("h5",[e._v("Доступные устройства ("+e._s(e.controllers.length)+")")]),s("div",{staticClass:"p-2"},[s("b-table",{attrs:{responsive:"",fixed:"",items:e.controllers,fields:e.columns,"table-variant":"secondary"},scopedSlots:e._u([{key:"cell(button1)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.blink(t.item.cid)}}},[e._v(" Сигнал ")])]}},{key:"cell(button2)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.chooseDevive(t.index)}}},[e._v(" Добавить ")])]}}])})],1)]),s("b-col",[s("div",[s("h5",[e._v("Выбранные устройства ("+e._s(e.selectedDevices.length)+")")]),s("div",{staticClass:"p-2"},[s("b-table",{attrs:{responsive:"",items:e.selectedDevices,fields:e.columns,"table-variant":"secondary"},scopedSlots:e._u([{key:"cell(button1)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.blink(t.item.cid)}}},[e._v(" Сигнал ")])]}},{key:"cell(button2)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.deleteDevive(t.index,t.item.cid)}}},[e._v(" Удалить ")])]}}])})],1)])])],1)],1),s("div",{staticClass:"my-3"},[s("b-card",{staticClass:"bg-sec"},[s("div",{staticClass:"text-center mt-2"},[s("b-button",{attrs:{variant:"dark"},on:{click:function(t){return e.addController(e.arr,e.selectedDevices)}}},[e._v("Прикрепить к "+e._s(e.arr.length)+" областям")])],1)])],1)])},l=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"controllers"},[s("h1",[e._v("Светильники:")]),s("div",{staticClass:"w-50 ml-2 p-2"},[s("b-table",{attrs:{striped:"",hover:"",fixed:"",bordered:"",items:e.controllers,fields:e.columns,"head-variant":"light","table-variant":"secondary"},scopedSlots:e._u([{key:"cell(button1)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.blink(t.item.cid)}}},[e._v(" Сигнал ")])]}},{key:"cell(button2)",fn:function(t){return[s("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(s){return e.chooseDevive(t.item.cid)}}},[e._v(" Добавить ")])]}}])})],1)])},i=[],c={name:"controllers",data(){return{controllers:[{id:0,cid:133323},{id:1,cid:123453},{id:2,cid:121233}],columns:[{key:"id",label:"ID"},{key:"cid",label:"CID"},{key:"button1",label:"Подать сигнал"},{key:"button2",label:"Выбрать"}]}},methods:{async blink(e){alert("blink "+e)},async chooseDevive(e){alert("choose "+e)}}},r=c,a=s("2877"),d=Object(a["a"])(r,o,i,!1,null,null,null),u=d.exports,b={name:"addController.vue",props:["arr","id"],components:{controllers:u},data(){return{controllers:[{cid:"12"},{cid:"kajbdkaw"},{cid:"12342673571642421"},{cid:"1akljbdalkjwbd2342421"}],selectedDevices:[],columns:[{key:"cid",label:"ID"},{key:"button1",label:"Подать сигнал"},{key:"button2",label:"Выбрать"}],groupAlert:!1}},methods:{async getFreeDevices(){let e={};fetch("/freeDevices",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{})},async chooseDevive(e){console.log("choosing "+e),this.selectedDevices.push(this.controllers[e]),this.controllers.splice(e,1)},async deleteDevive(e,t){console.log("deleting "+e),this.controllers.push(this.selectedDevices[e]),this.removeByAttr(this.selectedDevices,"cid",t)},async removeByAttr(e,t,s){var n=e.length;while(n--)e[n]&&e[n].hasOwnProperty(t)&&arguments.length>2&&e[n][t]===s&&e.splice(n,1);return e},blink(e){console.log("blink "+e);let t={id:e};fetch("/blink",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json",id:e}})},async addController(e,t){console.log(e),console.log(t)},async createGroup(){let e={group:this.selectedDevices};fetch("/createGroup",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json",roomName:this.roomName,ssid:"StarLight_"+this.ap_ssid,pass:this.ap_pass,token:this.token}}).then(e=>{console.log("run create group"),this.$parent.showAlert("Группа создается, подождите",200,"success")})}}},v=b,h=Object(a["a"])(v,n,l,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0bdcfc.c2fe4db2.js.map