{"version":3,"sources":["webpack:///./src/views/addController.vue?a2c5","webpack:///./src/views/controllers.vue?0088","webpack:///src/views/controllers.vue","webpack:///./src/views/controllers.vue?2eea","webpack:///./src/views/controllers.vue","webpack:///src/views/addController.vue","webpack:///./src/views/addController.vue?33e3","webpack:///./src/views/addController.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","arr","controllers","length","attrs","columns","scopedSlots","_u","key","fn","row","on","$event","blink","item","cid","chooseDevive","index","selectedDevices","deleteDevive","addController","staticRenderFns","name","id","label","methods","alert","component","props","components","groupAlert","data","fetch","method","body","JSON","stringify","headers","then","response","console","log","push","splice","removeByAttr","attr","value","i","hasOwnProperty","arguments","devices","group","roomName","ap_ssid","ap_pass","token","$parent","showAlert"],"mappings":"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","file":"js/chunk-2d0bdcfc.c2fe4db2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addController\"},[_vm._v(\" \"+_vm._s(_vm.arr)+\" \"),_c('div',[_c('b-row',{staticClass:\"p-2\"},[_c('b-col',[_c('h5',[_vm._v(\"Доступные устройства (\"+_vm._s(_vm.controllers.length)+\")\")]),_c('div',{staticClass:\"p-2\"},[_c('b-table',{attrs:{\"responsive\":\"\",\"fixed\":\"\",\"items\":_vm.controllers,\"fields\":_vm.columns,\"table-variant\":\"secondary\"},scopedSlots:_vm._u([{key:\"cell(button1)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.blink(row.item.cid)}}},[_vm._v(\" Сигнал \")])]}},{key:\"cell(button2)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.chooseDevive(row.index)}}},[_vm._v(\" Добавить \")])]}}])})],1)]),_c('b-col',[_c('div',[_c('h5',[_vm._v(\"Выбранные устройства (\"+_vm._s(_vm.selectedDevices.length)+\")\")]),_c('div',{staticClass:\"p-2\"},[_c('b-table',{attrs:{\"responsive\":\"\",\"items\":_vm.selectedDevices,\"fields\":_vm.columns,\"table-variant\":\"secondary\"},scopedSlots:_vm._u([{key:\"cell(button1)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.blink(row.item.cid)}}},[_vm._v(\" Сигнал \")])]}},{key:\"cell(button2)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.deleteDevive(row.index, row.item.cid)}}},[_vm._v(\" Удалить \")])]}}])})],1)])])],1)],1),_c('div',{staticClass:\"my-3\"},[_c('b-card',{staticClass:\"bg-sec\"},[_c('div',{staticClass:\"text-center mt-2\"},[_c('b-button',{attrs:{\"variant\":\"dark\"},on:{\"click\":function($event){return _vm.addController(_vm.arr, _vm.selectedDevices)}}},[_vm._v(\"Прикрепить к \"+_vm._s(_vm.arr.length)+\" областям\")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"controllers\"},[_c('h1',[_vm._v(\"Светильники:\")]),_c('div',{staticClass:\"w-50 ml-2 p-2\"},[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"fixed\":\"\",\"bordered\":\"\",\"items\":_vm.controllers,\"fields\":_vm.columns,\"head-variant\":\"light\",\"table-variant\":\"secondary\"},scopedSlots:_vm._u([{key:\"cell(button1)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.blink(row.item.cid)}}},[_vm._v(\" Сигнал \")])]}},{key:\"cell(button2)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.chooseDevive(row.item.cid)}}},[_vm._v(\" Добавить \")])]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"controllers\">\n    <h1>Светильники:</h1>\n    <div class=\"w-50 ml-2 p-2\">\n      <b-table striped hover fixed bordered :items=\"controllers\" :fields=\"columns\" head-variant=\"light\" table-variant=\"secondary\">\n        <template #cell(button1)=\"row\">\n          <b-button size=\"sm\" class=\"mr-2\" @click=\"blink(row.item.cid)\">\n            Сигнал\n          </b-button>\n        </template>\n        <template #cell(button2)=\"row\">\n          <b-button size=\"sm\" @click=\"chooseDevive(row.item.cid)\" class=\"mr-2\">\n            Добавить\n          </b-button>\n        </template>\n      </b-table>\n    </div>\n\n  </div>\n</template>\n<script>\nexport default {\n  name: 'controllers',\n  data () {\n    return {\n      controllers: [\n        {id: 0, cid: 133323},\n        {id: 1, cid: 123453},\n        {id: 2, cid: 121233},\n      ],\n      columns: [\n        {key: 'id', label: 'ID'},\n        {key: 'cid', label: 'CID'},\n        {key: 'button1', label: 'Подать сигнал'},\n        {key: 'button2', label: 'Выбрать'},\n      ],\n    }\n  },\n  methods: {\n    async blink(id) {\n      alert(\"blink \"+id)\n    },\n    async chooseDevive(id) {\n      alert('choose '+id)\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controllers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./controllers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./controllers.vue?vue&type=template&id=68dd68a7&\"\nimport script from \"./controllers.vue?vue&type=script&lang=js&\"\nexport * from \"./controllers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"addController\">\n    {{arr}}\n    <div>\n      <b-row class=\"p-2\">\n        <b-col>\n            <h5>Доступные устройства ({{ controllers.length }})</h5>\n            <div class=\"p-2\">\n              <b-table responsive fixed :items=\"controllers\" :fields=\"columns\" table-variant=\"secondary\">\n                <template #cell(button1)=\"row\">\n                  <b-button size=\"sm\" class=\"mr-2\" @click=\"blink(row.item.cid)\">\n                    Сигнал\n                  </b-button>\n                </template>\n                <template #cell(button2)=\"row\">\n                  <b-button size=\"sm\" @click=\"chooseDevive(row.index)\" class=\"mr-2\">\n                    Добавить\n                  </b-button>\n                </template>\n              </b-table>\n            </div>\n        </b-col>\n        <b-col>\n          <div>\n            <h5>Выбранные устройства ({{ selectedDevices.length }})</h5>\n            <div class=\"p-2\">\n              <b-table responsive :items=\"selectedDevices\" :fields=\"columns\" table-variant=\"secondary\">\n                <template #cell(button1)=\"row\">\n                  <b-button size=\"sm\" class=\"mr-2\" @click=\"blink(row.item.cid)\">\n                    Сигнал\n                  </b-button>\n                </template>\n                <template #cell(button2)=\"row\">\n                  <b-button size=\"sm\" @click=\"deleteDevive(row.index, row.item.cid)\" class=\"mr-2\">\n                    Удалить\n                  </b-button>\n                </template>\n              </b-table>\n            </div>\n          </div>\n        </b-col>\n      </b-row>\n    </div>\n\n\n    <div class=\"my-3\">\n      <b-card class=\"bg-sec\">\n        <div class=\"text-center mt-2\">\n          <b-button variant=\"dark\" @click=\"addController(arr, selectedDevices)\">Прикрепить к {{arr.length}} областям</b-button>\n        </div>\n      </b-card>\n<!--      <div v-if=\"groupAlert\" class=\"fixed-top w-100 h-100\" style=\"z-index: 5; background-color: rgba(0,0,0,0.7)\" />-->\n<!--      <b-alert-->\n<!--          dismissible-->\n<!--          v-model=\"groupAlert\"-->\n<!--          variant=\"dark\"-->\n<!--          class=\"position-fixed\"-->\n<!--          style=\"top: 10vh; left: 10vw; width: 80vw; height: 80vh; z-index: 10; padding: 5%;\"-->\n<!--      >-->\n<!--        <div class=\"my-3\">-->\n<!--          <h3>Создание группы</h3>-->\n<!--          <div class=\"px-2\">-->\n<!--            <h5>Выбранные устройства: </h5>-->\n<!--            <div class=\"text-center mt-4\">-->\n<!--              <b-button variant=\"dark\" @click=\"createGroup()\">Создать группу</b-button>-->\n<!--            </div>-->\n<!--          </div>-->\n<!--        </div>-->\n<!--      </b-alert>-->\n    </div>\n  </div>\n</template>\n\n<script>\nimport controllers from \"@/views/controllers\";\nexport default {\nname: \"addController.vue\",\n  props: ['arr', 'id'],\n  components: {\n    controllers\n  },\n  data() {\n    return {\n      controllers: [{cid: '12'}, {cid: 'kajbdkaw'}, {cid: '12342673571642421'}, {cid: '1akljbdalkjwbd2342421'}],\n      selectedDevices: [],\n      columns: [\n        {key: 'cid', label: 'ID'},\n        {key: 'button1', label: 'Подать сигнал'},\n        {key: 'button2', label: 'Выбрать'},\n      ],\n      groupAlert: false,\n    }\n  },\n  methods: {\n    async getFreeDevices() {\n      let data = {}\n      fetch(`/freeDevices`,\n          {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n            }\n          }\n      ).then(response => {\n\n      })\n    },\n    async chooseDevive(id) {\n      console.log('choosing ' + id);\n      this.selectedDevices.push(this.controllers[id])\n      this.controllers.splice(id, 1)\n    },\n    async deleteDevive(id, cid) {\n      console.log('deleting ' + id);\n      this.controllers.push(this.selectedDevices[id])\n      this.removeByAttr(this.selectedDevices, 'cid', cid)\n    },\n    async removeByAttr(arr, attr, value){\n      var i = arr.length;\n      while(i--){\n        if( arr[i]\n            && arr[i].hasOwnProperty(attr)\n            && (arguments.length > 2 && arr[i][attr] === value ) ){\n          arr.splice(i,1);\n        }\n      }\n      return arr;\n    },\n    blink(id) {\n      console.log('blink ' + id)\n      let data = {\n        id: id\n      }\n      fetch(`/blink`,\n          {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n              'id': id,\n            }\n          }\n      )\n    },\n    async addController(arr, devices){\n      console.log(arr)\n      console.log(devices)\n    },\n    async createGroup() {\n      let data = {\n        group: this.selectedDevices\n      }\n      fetch(`/createGroup`,\n          {\n            method: \"POST\",\n            body: JSON.stringify(data),\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n              'roomName': this.roomName,\n              'ssid': \"StarLight_\" + this.ap_ssid,\n              'pass': this.ap_pass,\n              'token': this.token\n            }\n          }\n      ).then(response => {\n        console.log('run create group')\n        this.$parent.showAlert('Группа создается, подождите', 200, 'success')\n      })\n    },\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addController.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addController.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addController.vue?vue&type=template&id=687c34c8&\"\nimport script from \"./addController.vue?vue&type=script&lang=js&\"\nexport * from \"./addController.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}