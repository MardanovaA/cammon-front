{"remainingRequest":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aigul/projects/rtsp_stream_v2/src/views/synchronize.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/aigul/projects/rtsp_stream_v2/src/views/synchronize.vue","mtime":1614288011997},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmNvbnN0IHdpZHRoID0gNzUwOwpjb25zdCBoZWlnaHQgPSAzNTA7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInN5bmNocm9uaXplLnZ1ZSIsCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhOiAoKSA9PiAoewogICAgbWVzc2FnZTogJ9CS0YvQsdC10YDQuNGC0LUg0YDQsNCx0L7Rh9GD0Y4g0L7QsdC70LDRgdGC0YwnLAogICAgcG9pbnRzOiBbXSwKICAgIGk6IDAsCiAgICB4OiBudWxsLCB5OiBudWxsLAogICAgYXg6IG51bGwsIGF5OiBudWxsLAogICAgY2FudmFzOiBudWxsLAogICAgY29udGV4dDogbnVsbCwKICAgIGlzRHJhd2luZzE6IHRydWUsCiAgICByZWN0OiBudWxsLAogICAgaXNTeW5jaDogZmFsc2UsCiAgICBzdGFnZVNpemU6IHsKICAgICAgd2lkdGg6IHdpZHRoLAogICAgICBoZWlnaHQ6IGhlaWdodCwKICAgIH0sCiAgICBsaW5lczogW10sCiAgICBpc0RyYXdpbmc6IGZhbHNlLAogICAgcmVjczogW10sCiAgfSksCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXMKICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIik7IC8vY3R4CiAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gMjsKICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9ICJibHVlIgogICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJyZ2JhKDAsMjU1LDI1NSwwLjQpIgogICAgdGhpcy5yZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGljaykKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZU1vdXNlRG93bihldmVudCkgewogICAgICBjb25zdCBwb3MgPSB0aGlzLiRyZWZzLnN0YWdlLmdldE5vZGUoKS5nZXRQb2ludGVyUG9zaXRpb24oKTsKICAgICAgdGhpcy5yZWNzID0gWwogICAgICAgIC4uLnRoaXMucmVjcywKICAgICAgICB7IHN0YXJ0UG9pbnRYOiBwb3MueCwgc3RhcnRQb2ludFk6IHBvcy55LCB3aWR0aDogMCwgaGVpZ2h0OiAwIH0sCiAgICAgIF07CiAgICB9LAogICAgaGFuZGxlTW91c2VVcCgpIHsKICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMucmVjcy5sZW5ndGg+MCl7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5yZWN0KQogICAgICB9CiAgICB9LAogICAgaGFuZGxlTW91c2VNb3ZlKGV2ZW50KSB7CiAgICAgIC8vIG5vIGRyYXdpbmcgLSBza2lwcGluZwogICAgICBpZiAoIXRoaXMuaXNEcmF3aW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHBvaW50ID0gdGhpcy4kcmVmcy5zdGFnZS5nZXROb2RlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7CiAgICAgIC8vIGhhbmRsZSAgcmVjdGFuZ2xlIHBhcnQKICAgICAgbGV0IGN1clJlYyA9IHRoaXMucmVjc1t0aGlzLnJlY3MubGVuZ3RoIC0gMV07CiAgICAgIGN1clJlYy53aWR0aCA9IHBvaW50LnggLSBjdXJSZWMuc3RhcnRQb2ludFg7CiAgICAgIGN1clJlYy5oZWlnaHQgPSBwb2ludC55IC0gY3VyUmVjLnN0YXJ0UG9pbnRZOwogICAgfSwKCiAgICBzYXZlKHJlY3MsIHBvaW50cyl7CiAgICAgIHZhciBpZCA9IHRoaXMuaWQKICAgICAgaWYodGhpcy5pc1N5bmNoKXsKICAgICAgICBjb25zb2xlLmxvZygnU3luY2hyb25pemF0ZWQnKQogICAgICAgIHBvaW50cyA9IHRoaXMuYXJyUHhUb1Byb2MocG9pbnRzKQogICAgICAgIHJlY3MgPSB0aGlzLnJlY3NUb1Byb2NlbnQocmVjcykKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ2hvbWUnfSwgdGhpcy5zZW5kQ29uZmlnKHJlY3MsIHBvaW50cywgaWQpKQogICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAncG9zdFN5bmNoJywgcHJvcHM6IHtpZDogdGhpcy5pZCwgcG9pbnRzOiBwb2ludHMsIHJlY3M6IHJlY3N9fSkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnTm90IHN5bmNocm9uaXphdGVkJykKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFyclB4VG9Qcm9jKHBvaW50cykpCiAgICAgIH0KICAgIH0sCiAgICBzZW5kQ29uZmlnKHJlY3MsIHBvaW50cywgaWQpewoKICAgICAgY29uc29sZS5sb2cocmVjcykKICAgICAgY29uc29sZS5sb2cocG9pbnRzKQogICAgICBjb25zb2xlLmxvZyhpZCkKCiAgICAgIGF4aW9zLnB1dChgaHR0cDovLzE5Mi4xNjguMS4xMDQ6NTAwMC9hcGkvY2FtZXJhcy8ke2lkfWAsIHsKICAgICAgICBudW1lcmljX2RhdGFzZXQ6IHsKICAgICAgICAgIGN5OiByZWNzLnN0YXJ0UG9pbnRZLAogICAgICAgICAgY3g6IHJlY3Muc3RhcnRQb2ludFgsCiAgICAgICAgICBhaDogcmVjcy5oZWlnaHQsCiAgICAgICAgICBhdzogcmVjcy53aWR0aAogICAgICAgIH0sCiAgICAgICAgaXNvbWVyaWNfZGF0YXNldDogewogICAgICAgICAgYTE6IHBvaW50c1swXSwKICAgICAgICAgIGIxOiBwb2ludHNbMV0sCiAgICAgICAgICBjMTogcG9pbnRzWzJdLAogICAgICAgICAgZDE6IHBvaW50c1szXQogICAgICAgIH0KICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIH0pCiAgICB9LAogICAgdG9TeW5jaCgpewogICAgICB0aGlzLmlzRHJhd2luZyA9IHRydWU7CiAgICAgIHRoaXMuaXNTeW5jaCA9IHRydWUKICAgICAgdGhpcy5tZXNzYWdlID0gItCh0LjQvdGF0YDQvtC90LjQt9Cw0YbQuNGPINGBINC/0LvQsNC90L7QvCIKICAgIH0sCiAgICBjbG9zZUFyZWE6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pID0gMAogICAgICB0aGlzLnggPSBudWxsCiAgICAgIHRoaXMueSA9IG51bGwKICAgICAgdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpCiAgICAgIHRoaXMuY29udGV4dC5maWxsKCk7CiAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTsKICAgICAgdGhpcy5pc0RyYXdpbmcxPWZhbHNlCiAgICB9LAogICAgZGVsZXRlQXJlYSgpIHsKICAgICAgICB0aGlzLmRlbERyYXdpbmdBcmVhKCkKICAgICAgdGhpcy5pc0RyYXdpbmcxID0gdHJ1ZQogICAgICAgIHRoaXMuaXNTeW5jaCA9IGZhbHNlCiAgICAgIHRoaXMuaXNEcmF3aW5nID0gZmFsc2UKICAgICAgdGhpcy5yZWNzPVtdCiAgICB9LAogICAgZGVsRHJhd2luZ1JlY3QoKXsKICAgICAgdGhpcy5yZWNzPVtdCiAgICB9LAogICAgZGVsRHJhd2luZ0FyZWEoKSB7CiAgICAgIHRoaXMucG9pbnRzID0gW10KICAgICAgdGhpcy5pID0gMAogICAgICB0aGlzLnggPSBudWxsCiAgICAgIHRoaXMueSA9IG51bGwKCiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5yZWN0LndpZHRoLCB0aGlzLnJlY3QuaGVpZ2h0KQogICAgfSwKICAgIGNsaWNrKGUpIHsKICAgICAgdmFyIHggPSBlLmNsaWVudFggLSB0aGlzLnJlY3QubGVmdAogICAgICB2YXIgeSA9IGUuY2xpZW50WSAtIHRoaXMucmVjdC50b3AKICAgICAgaWYgKHRoaXMuaXNEcmF3aW5nMSkgewogICAgICAgIHRoaXMucG9pbnRzLnB1c2goW3gsIHldKQogICAgICAgIGlmICh0aGlzLmkgPT0gMCkgewogICAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpOwogICAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh4LCB5KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaSA+IDApIHsKICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oeCwgeSk7CiAgICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CiAgICAgICAgICBpZiAoTWF0aC5hYnMoeCAtIHRoaXMucG9pbnRzWzBdWzBdKSA8IDEwICYmIE1hdGguYWJzKHkgLSB0aGlzLnBvaW50c1swXVsxXSkgPCAxMCkgewogICAgICAgICAgICB0aGlzLmNsb3NlQXJlYSgpCiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuaSsrCiAgICAgICAgaWYgKHRoaXMuaT09PTQpewogICAgICAgICAgdGhpcy5jbG9zZUFyZWEoKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHB4VG9Qcm9jZW50KHgsIHkpIHsKICAgICAgcmV0dXJuIFtNYXRoLnJvdW5kKCh4IC8gdGhpcy5yZWN0LndpZHRoKSAqIDEwMCksIE1hdGgucm91bmQoKHkgLyB0aGlzLnJlY3QuaGVpZ2h0KSAqIDEwMCldCiAgICB9LAogICAgcmVjc1RvUHJvY2VudChyZWN0KXsKICAgICAgdmFyIHJlY3QxPXt9CiAgICAgIHJlY3QxLnN0YXJ0UG9pbnRYID0gTWF0aC5yb3VuZCgocmVjdC5zdGFydFBvaW50WCAvIHdpZHRoKSAqIDEwMCkKICAgICAgcmVjdDEuc3RhcnRQb2ludFkgPSBNYXRoLnJvdW5kKChyZWN0LnN0YXJ0UG9pbnRZIC8gaGVpZ2h0KSAqIDEwMCkKICAgICAgcmVjdDEud2lkdGggPSBNYXRoLnJvdW5kKChyZWN0LndpZHRoIC8gd2lkdGgpICogMTAwKQogICAgICByZWN0MS5oZWlnaHQgPSBNYXRoLnJvdW5kKChyZWN0LmhlaWdodCAvIGhlaWdodCkgKiAxMDApCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlY3QpCiAgICAgIHJldHVybiByZWN0MQogICAgfSwKICAgIGFyclB4VG9Qcm9jKGFycikgewogICAgICB2YXIgYXJyMSA9IFtdLCBkb3QKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGRvdCA9IHRoaXMucHhUb1Byb2NlbnQoYXJyW2ldWzBdLCBhcnJbaV1bMV0pCiAgICAgICAgICBhcnIxLnB1c2goW2RvdF0pCiAgICAgICAgfQogICAgICByZXR1cm4gYXJyMQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["synchronize.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"synchronize.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"synchronize\">\n    <b-row class=\"m-0\">\n      <b-col cols=\"4\">\n        <h2>{{message}} {{id}}</h2>\n      </b-col>\n      <b-col class=\"float-right\">\n          <div v-if=\"!isDrawing1\">\n            <b-button v-on:click=\"deleteArea\" variant=\"secondary\" class=\"mx-2\">Заново</b-button>\n            <b-button v-on:click=\"toSynch\" variant=\"secondary\" class=\"mx-2\" v-if=\"!isSynch\">Синхронизировать с планом</b-button>\n            <b-button v-on:click=\"save(recs[0], points)\" variant=\"dark\" class=\"mx-2\">Сохранить</b-button>\n            <b-button v-on:click=\"recs=[]; isDrawing=true\" variant=\"dark\" class=\"mx-2\" v-if=\"rect!=null\">Отменить</b-button>\n          </div>\n          <div v-else>\n            <b-button v-if=\"i>3\" v-on:click=\"closeArea\" variant=\"dark\" class=\"mx-2\">Замкнуть область</b-button>\n            <b-button v-on:click=\"delDrawingArea\" variant=\"dark\" class=\"mx-2\">Отменить</b-button>\n          </div>\n      </b-col>\n    </b-row>\n\n    <div class=\"canvases\">\n      <img class=\"myCanvas\" style=\"z-index: 10\" :src=\"'http://192.168.1.104:5000/api/cameras/'+id\">\n      <canvas ref=\"canvas\" id='drawing-pad' width='640' height=\"320\" style=\"z-index: 100; border: 2px solid black\"\n              class=\"myCanvas\">\n        This is an interactive drawing pad.\n      </canvas>\n    </div>\n\n    <div class=\"canvases\">\n      <b-img v-if=\"isSynch\" class=\"plan\" src=\"/plan1.png\" height=\"350\" width=\"750\"></b-img>\n<!--      <canvas ref=\"canvas2\" id='drawing-pad2' width='750' height=\"350\" style=\"z-index: 100\"-->\n<!--              class=\"plan\">-->\n<!--        This is an interactive drawing pad.-->\n<!--      </canvas>-->\n      <v-stage\n          class=\"plan\" style=\"z-index: 100\"\n          ref=\"stage\"\n          :config=\"stageSize\"\n          @mousemove=\"handleMouseMove\"\n          @mouseDown=\"handleMouseDown\"\n          @mouseUp=\"handleMouseUp\"\n      >\n        <v-layer ref=\"layer\">\n          <v-rect\n              v-for=\"(rec, index) in recs\"\n              :key=\"index\"\n              :config=\"{\n          x: Math.min(rec.startPointX, rec.startPointX + rec.width),\n          y: Math.min(rec.startPointY, rec.startPointY + rec.height),\n          width: Math.abs(rec.width),\n          height: Math.abs(rec.height),\n          fill: 'rgb(255,0,0,0.4)',\n          stroke: 'black',\n            draggable: true,\n          strokeWidth: 3,\n        }\"\n          />\n        </v-layer>\n      </v-stage>\n    </div>\n\n<!--    <div style=\"margin-top: 400px\">-->\n<!--    </div>-->\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nconst width = 750;\nconst height = 350;\n\nexport default {\n  name: \"synchronize.vue\",\n  props: ['id'],\n  data: () => ({\n    message: 'Выберите рабочую область',\n    points: [],\n    i: 0,\n    x: null, y: null,\n    ax: null, ay: null,\n    canvas: null,\n    context: null,\n    isDrawing1: true,\n    rect: null,\n    isSynch: false,\n    stageSize: {\n      width: width,\n      height: height,\n    },\n    lines: [],\n    isDrawing: false,\n    recs: [],\n  }),\n  mounted() {\n    this.canvas = this.$refs.canvas\n    this.context = this.canvas.getContext(\"2d\"); //ctx\n    this.context.lineWidth = 2;\n    this.context.strokeStyle = \"blue\"\n    this.context.fillStyle = \"rgba(0,255,255,0.4)\"\n    this.rect = this.canvas.getBoundingClientRect()\n    this.canvas.addEventListener('click', this.click)\n  },\n  methods: {\n    handleMouseDown(event) {\n      const pos = this.$refs.stage.getNode().getPointerPosition();\n      this.recs = [\n        ...this.recs,\n        { startPointX: pos.x, startPointY: pos.y, width: 0, height: 0 },\n      ];\n    },\n    handleMouseUp() {\n      this.isDrawing = false;\n      if (this.recs.length>0){\n        console.log(this.rect)\n      }\n    },\n    handleMouseMove(event) {\n      // no drawing - skipping\n      if (!this.isDrawing) {\n        return;\n      }\n      const point = this.$refs.stage.getNode().getPointerPosition();\n      // handle  rectangle part\n      let curRec = this.recs[this.recs.length - 1];\n      curRec.width = point.x - curRec.startPointX;\n      curRec.height = point.y - curRec.startPointY;\n    },\n\n    save(recs, points){\n      var id = this.id\n      if(this.isSynch){\n        console.log('Synchronizated')\n        points = this.arrPxToProc(points)\n        recs = this.recsToProcent(recs)\n        this.$router.push({name: 'home'}, this.sendConfig(recs, points, id))\n        // this.$router.push({name: 'postSynch', props: {id: this.id, points: points, recs: recs}})\n      }\n      else {\n        console.log('Not synchronizated')\n        console.log(this.arrPxToProc(points))\n      }\n    },\n    sendConfig(recs, points, id){\n\n      console.log(recs)\n      console.log(points)\n      console.log(id)\n\n      axios.put(`http://192.168.1.104:5000/api/cameras/${id}`, {\n        numeric_dataset: {\n          cy: recs.startPointY,\n          cx: recs.startPointX,\n          ah: recs.height,\n          aw: recs.width\n        },\n        isomeric_dataset: {\n          a1: points[0],\n          b1: points[1],\n          c1: points[2],\n          d1: points[3]\n        }\n      })\n          .then(function (response) {\n            console.log(response)\n          })\n          .catch(function (error) {\n            console.log(error);\n          })\n    },\n    toSynch(){\n      this.isDrawing = true;\n      this.isSynch = true\n      this.message = \"Синхронизация с планом\"\n    },\n    closeArea: function () {\n      this.i = 0\n      this.x = null\n      this.y = null\n      this.context.closePath()\n      this.context.fill();\n      this.context.stroke();\n      this.isDrawing1=false\n    },\n    deleteArea() {\n        this.delDrawingArea()\n      this.isDrawing1 = true\n        this.isSynch = false\n      this.isDrawing = false\n      this.recs=[]\n    },\n    delDrawingRect(){\n      this.recs=[]\n    },\n    delDrawingArea() {\n      this.points = []\n      this.i = 0\n      this.x = null\n      this.y = null\n\n      this.context.clearRect(0, 0, this.rect.width, this.rect.height)\n    },\n    click(e) {\n      var x = e.clientX - this.rect.left\n      var y = e.clientY - this.rect.top\n      if (this.isDrawing1) {\n        this.points.push([x, y])\n        if (this.i == 0) {\n          this.context.beginPath();\n          this.context.moveTo(x, y);\n        }\n        if (this.i > 0) {\n          this.context.lineTo(x, y);\n          this.context.stroke();\n          if (Math.abs(x - this.points[0][0]) < 10 && Math.abs(y - this.points[0][1]) < 10) {\n            this.closeArea()\n            return 0\n          }\n        }\n        this.i++\n        if (this.i===4){\n          this.closeArea()\n        }\n      }\n    },\n    pxToProcent(x, y) {\n      return [Math.round((x / this.rect.width) * 100), Math.round((y / this.rect.height) * 100)]\n    },\n    recsToProcent(rect){\n      var rect1={}\n      rect1.startPointX = Math.round((rect.startPointX / width) * 100)\n      rect1.startPointY = Math.round((rect.startPointY / height) * 100)\n      rect1.width = Math.round((rect.width / width) * 100)\n      rect1.height = Math.round((rect.height / height) * 100)\n      // console.log(rect)\n      return rect1\n    },\n    arrPxToProc(arr) {\n      var arr1 = [], dot\n      for (var i = 0; i < arr.length; i++) {\n          dot = this.pxToProcent(arr[i][0], arr[i][1])\n          arr1.push([dot])\n        }\n      return arr1\n    },\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n}\n\n.canvases {\n  position: relative;\n}\n\n.myCanvas {\n  position: absolute;\n  width: 640px;\n  height: 320px;\n  top: 0px\n}\n.plan {\n  position: absolute;\n  top: 0px;\n  left: 700px\n}\n</style>"]}]}