{"remainingRequest":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aigul/projects/rtsp_stream_v2/src/views/CameraPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/aigul/projects/rtsp_stream_v2/src/views/CameraPage.vue","mtime":1613949905583},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBKU01wZWcgZnJvbSAnanNtcGVnLXBsYXllcicKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FtZXJhUGFnZScsCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhOiAoKSA9PiAoewogICAgcG9pbnRzOiBbXSwKICAgIGFyZWFfaWQ6IDAsCiAgICBpOiAwLAogICAgYXJyOiBbXSwKICAgIHg6IG51bGwsIHk6IG51bGwsCiAgICBjYW52YXM6IG51bGwsCiAgICBjb250ZXh0OiBudWxsLAogICAgaXNEcmF3aW5nOiBmYWxzZSwKICAgIGNob3NlbkFyZWE6IC0xLAogICAgcmVjdDogbnVsbAogIH0pLAogIG1vdW50ZWQoKSB7CiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvQ2FudmFzJyk7CiAgICBsZXQgdXJsID0gJ3dzOi8vMTkyLjE2OC4xLjM1OjUwMDAnOwogICAgbGV0IHBsYXllciA9IG5ldyBKU01wZWcuUGxheWVyKHVybCwgewogICAgICBjYW52YXM6IGNhbnZhcywKICAgICAgYXV0b3BsYXk6IHRydWUsIGF1ZGlvOiBmYWxzZSwgbG9vcDogdHJ1ZSwKICAgICAgb25WaWRlb0RlY29kZTogKCkgPT4gewogICAgICB9CiAgICB9KQogICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzLmNhbnZhcwogICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsgLy9jdHgKICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSAyOwogICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gImJsdWUiCiAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gInJnYmEoMCwyNTUsMjU1LDAuNCkiCiAgICB0aGlzLnJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQogICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrKQogICAgLy8gdGhpcy5kcmF3RnJvbVNlcnZlcigpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZUFyZWE6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFyZWEgPSB7ImlkIjogdGhpcy5hcmVhX2lkLCAiZG90cyI6IHRoaXMucG9pbnRzfQogICAgICB0aGlzLmFyZWFfaWQrKzsKICAgICAgdGhpcy5hcnIucHVzaChhcmVhKQogICAgICAvLyB0aGlzLndyaXRlQXJlYXNUb0ZpbGUoKQogICAgICB0aGlzLnBvaW50cyA9IFtdCiAgICAgIHRoaXMuaSA9IDAKICAgICAgdGhpcy54ID0gbnVsbAogICAgICB0aGlzLnkgPSBudWxsCiAgICAgIHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKQogICAgICB0aGlzLmNvbnRleHQuZmlsbCgpOwogICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7CiAgICAgIHRoaXMuaXNEcmF3aW5nID0gZmFsc2U7CiAgICB9LAogICAgY2hvc2VBcmVhKGlkKSB7CiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5yZWN0LndpZHRoLCB0aGlzLnJlY3QuaGVpZ2h0KQogICAgICB0aGlzLmRyYXdGcm9tQXJyYXkodGhpcy5hcnIpCiAgICAgIHRoaXMuY2hvc2VuQXJlYSA9IGlkCiAgICAgIHZhciBwb2ludHMgPSB0aGlzLmFycltpZF0uZG90cwogICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8ocG9pbnRzWzBdLngsIHBvaW50c1swXS55KTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHBvaW50c1tpXS54LCBwb2ludHNbaV0ueSkKICAgICAgfQogICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCkKICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gInJlZCIKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJyZ2JhKDI1NSwwLDE3MCwgMC40KSIKICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKTsKICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpOwogICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSAiYmx1ZSIKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJyZ2JhKDAsMjU1LDI1NSwwLjQpIgogICAgfSwKICAgIGRlbGV0ZUFyZWEoaWQpIHsKICAgICAgdGhpcy5hcnIuc3BsaWNlKGlkLCAxKQogICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMucmVjdC53aWR0aCwgdGhpcy5yZWN0LmhlaWdodCkKICAgICAgdGhpcy5kcmF3RnJvbUFycmF5KHRoaXMuYXJyKQogICAgICB0aGlzLmNob3NlbkFyZWEgPSAtMQogICAgfSwKICAgIGRlbERyYXdpbmdBcmVhKCkgewogICAgICB0aGlzLnBvaW50cyA9IFtdCiAgICAgIHRoaXMuaSA9IDAKICAgICAgdGhpcy54ID0gbnVsbAogICAgICB0aGlzLnkgPSBudWxsCiAgICAgIHRoaXMuaXNEcmF3aW5nID0gZmFsc2UKCiAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5yZWN0LndpZHRoLCB0aGlzLnJlY3QuaGVpZ2h0KQogICAgICB0aGlzLmRyYXdGcm9tQXJyYXkodGhpcy5hcnIpCiAgICB9LAogICAgY2xpY2soZSkgewogICAgICB2YXIgeCA9IGUuY2xpZW50WCAtIHRoaXMucmVjdC5sZWZ0CiAgICAgIHZhciB5ID0gZS5jbGllbnRZIC0gdGhpcy5yZWN0LnRvcAogICAgICBpZiAoIXRoaXMuaXNEcmF3aW5nKSB7CiAgICAgICAgaWYgKHRoaXMuaW5zaWRlKHt4LCB5fSwgdGhpcy5hcnIpICE9IC0xKSB7CiAgICAgICAgICB0aGlzLmNob3NlQXJlYSh0aGlzLmluc2lkZSh7eCwgeX0sIHRoaXMuYXJyKSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wb2ludHMucHVzaCh7eCwgeX0pCiAgICAgICAgaWYgKHRoaXMuaSA9PSAwKSB7CiAgICAgICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7CiAgICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKHgsIHkpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pID4gMCkgewogICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVUbyh4LCB5KTsKICAgICAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTsKICAgICAgICAgIGlmIChNYXRoLmFicyh4IC0gdGhpcy5wb2ludHNbMF0ueCkgPCAxMCAmJiBNYXRoLmFicyh5IC0gdGhpcy5wb2ludHNbMF0ueSkgPCAxMCkgewogICAgICAgICAgICBhbGVydCgnY2xvc2VBcmVhJykKICAgICAgICAgICAgdGhpcy5wb2ludHMucG9wKCkKICAgICAgICAgICAgdGhpcy5jbG9zZUFyZWEoKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmkrKwogICAgICB9CiAgICB9LAogICAgZHJhd0Zyb21BcnJheShhcnIpIHsKICAgICAgdmFyIHBvaW50cwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgIHBvaW50cyA9IGFycltpXS5kb3RzCiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpCiAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyhwb2ludHNbMF0ueCwgcG9pbnRzWzBdLnkpOwogICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICB2YXIgeCA9IHBvaW50c1tqXS54CiAgICAgICAgICB2YXIgeSA9IHBvaW50c1tqXS55CiAgICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHgsIHkpOwogICAgICAgIH0KICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCkKICAgICAgICB0aGlzLmNvbnRleHQuZmlsbCgpOwogICAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGFkZENvbnRyb2xsZXIoYXJyKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnYWRkQ29udHJvbGxlcicsIHBhcmFtczoge2FycjogdGhpcy5hcnJQeFRvUHJvYyhhcnIpLCBpZDogdGhpcy5pZH19KQogICAgfSwKICAgIHB4VG9Qcm9jZW50KHgsIHkpIHsKICAgICAgOwogICAgICByZXR1cm4geyd4JzogTWF0aC5yb3VuZCgoeCAvIHRoaXMucmVjdC53aWR0aCkgKiAxMDApLCAneSc6IE1hdGgucm91bmQoKHkgLyB0aGlzLnJlY3QuaGVpZ2h0KSAqIDEwMCl9CiAgICB9LAogICAgcHJvY2VudFRvUHgoeCwgeSkgewogICAgICA7CiAgICAgIHJldHVybiB7J3gnOiB4ICogdGhpcy5yZWN0LndpZHRoIC8gMTAwLCAneSc6IHkgKiB0aGlzLnJlY3QuaGVpZ2h0IC8gMTAwfQogICAgfSwKICAgIGluc2lkZShwb2ludCwgdnMpIHsKICAgICAgdmFyIHggPSBwb2ludC54LCB5ID0gcG9pbnQueTsKICAgICAgdmFyIGluc2lkZSA9IGZhbHNlLCBwb2ludHMgPSBbXQogICAgICBmb3IgKHZhciBrID0gMDsgayA8IHZzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgcG9pbnRzID0gdnNba10uZG90cwogICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPCBwb2ludHMubGVuZ3RoOyBqID0gaSsrKSB7CiAgICAgICAgICB2YXIgeGkgPSBwb2ludHNbaV0ueCwgeWkgPSBwb2ludHNbaV0ueTsKICAgICAgICAgIHZhciB4aiA9IHBvaW50c1tqXS54LCB5aiA9IHBvaW50c1tqXS55OwoKICAgICAgICAgIHZhciBpbnRlcnNlY3QgPSAoKHlpID4geSkgIT0gKHlqID4geSkpCiAgICAgICAgICAgICAgJiYgKHggPCAoeGogLSB4aSkgKiAoeSAtIHlpKSAvICh5aiAtIHlpKSArIHhpKTsKICAgICAgICAgIGlmIChpbnRlcnNlY3QpIGluc2lkZSA9ICFpbnNpZGU7CiAgICAgICAgfQogICAgICAgIGlmIChpbnNpZGUpIHsKICAgICAgICAgIHJldHVybiBrCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAtMQogICAgfSwKICAgIGFyclB4VG9Qcm9jKGFycikgewogICAgICBjb25zb2xlLmxvZyhhcnIubGVuZ3RoKQogICAgICB2YXIgcG9pbnRzLCBhcnIxID0gW10sIHBvaW50czIgPSBbXSwgZG90CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcG9pbnRzID0gYXJyW2ldLmRvdHMKICAgICAgICBjb25zb2xlLmxvZyhwb2ludHMsIHBvaW50cy5sZW5ndGgpCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGRvdCA9IHRoaXMucHhUb1Byb2NlbnQocG9pbnRzW2pdLngsIHBvaW50c1tqXS55KQogICAgICAgICAgcG9pbnRzMi5wdXNoKGRvdCkKICAgICAgICB9CiAgICAgICAgYXJyMS5wdXNoKHsnaWQnOiBpLCAnZG90cyc6IHBvaW50czJ9KQogICAgICAgIHBvaW50cyA9IG51bGwKICAgICAgfQogICAgICByZXR1cm4gYXJyMQogICAgfSwKICAgIHJpZ2h0X2NsaWNrKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICA7CiAgICAgIHZhciB4ID0gZS5jbGllbnRYIC0gdGhpcy5yZWN0LmxlZnQKICAgICAgdmFyIHkgPSBlLmNsaWVudFkgLSB0aGlzLnJlY3QudG9wOwogICAgICB2YXIgayA9IHRoaXMuaW5zaWRlKHt4LCB5fSwgdGhpcy5hcnIpCiAgICAgIGNvbnNvbGUubG9nKGspCiAgICAgIC8vIGlmICh0aGlzLmNvbnRleHQuaXNQb2ludEluUGF0aCh4LHkpKSB7CiAgICAgIC8vICAgdGhpcy5hcnIucG9wKCkKICAgICAgLy8gICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsMCxyZWN0LndpZHRoLHJlY3QuaGVpZ2h0KQogICAgICAvLyB9CiAgICAgIC8vIHRoaXMuZHJhd0Zyb21BcnJheSh0aGlzLmFycikKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["CameraPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CameraPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"app\">\n\n    <b-row class=\"m-0\">\n      <b-col cols=\"8\">\n        <h2>Камера {{ id }}</h2>\n      </b-col>\n      <b-col class=\"float-right\">\n        <div v-if=\"chosenArea==-1\">\n          <div v-if=\"!isDrawing\">\n            <b-button v-on:click=\"isDrawing = 'true'\" variant=\"secondary\" class=\"mx-2\">Создать область</b-button>\n            <b-button v-if=\"arr.length\" v-on:click=\"addController(arr)\" class=\"mx-2\" variant=\"secondary\">Прикрепить\n            </b-button>\n          </div>\n          <div v-else>\n            <b-button v-if=\"i>2\" v-on:click=\"closeArea\" variant=\"dark\" class=\"mx-2\">Замкнуть область</b-button>\n            <b-button v-on:click=\"delDrawingArea\" variant=\"dark\" class=\"mx-2\">Отменить</b-button>\n          </div>\n        </div>\n        <div v-else>\n          <b-button v-on:click=\"deleteArea(chosenArea)\" variant=\"dark\" class=\"mx-2\">Удалить выбранную область</b-button>\n        </div>\n      </b-col>\n    </b-row>\n\n    <div class=\"canvases\">\n      <canvas class=\"myCanvas\" id=\"videoCanvas\" style=\"z-index: 10\"/>\n      <canvas ref=\"canvas\" id='drawing-pad' width='1280' height=\"640\" style=\"z-index: 100; border: 2px solid black\"\n              class=\"myCanvas\">\n        This is an interactive drawing pad.\n      </canvas>\n    </div>\n\n  </div>\n</template>\n\n\n<script>\nimport JSMpeg from 'jsmpeg-player'\n\nexport default {\n  name: 'CameraPage',\n  props: ['id'],\n  data: () => ({\n    points: [],\n    area_id: 0,\n    i: 0,\n    arr: [],\n    x: null, y: null,\n    canvas: null,\n    context: null,\n    isDrawing: false,\n    chosenArea: -1,\n    rect: null\n  }),\n  mounted() {\n    let canvas = document.getElementById('videoCanvas');\n    let url = 'ws://192.168.1.35:5000';\n    let player = new JSMpeg.Player(url, {\n      canvas: canvas,\n      autoplay: true, audio: false, loop: true,\n      onVideoDecode: () => {\n      }\n    })\n    this.canvas = this.$refs.canvas\n    this.context = this.canvas.getContext(\"2d\"); //ctx\n    this.context.lineWidth = 2;\n    this.context.strokeStyle = \"blue\"\n    this.context.fillStyle = \"rgba(0,255,255,0.4)\"\n    this.rect = this.canvas.getBoundingClientRect()\n    this.canvas.addEventListener('click', this.click)\n    // this.drawFromServer()\n  },\n  methods: {\n    closeArea: function () {\n      var area = {\"id\": this.area_id, \"dots\": this.points}\n      this.area_id++;\n      this.arr.push(area)\n      // this.writeAreasToFile()\n      this.points = []\n      this.i = 0\n      this.x = null\n      this.y = null\n      this.context.closePath()\n      this.context.fill();\n      this.context.stroke();\n      this.isDrawing = false;\n    },\n    choseArea(id) {\n      this.context.clearRect(0, 0, this.rect.width, this.rect.height)\n      this.drawFromArray(this.arr)\n      this.chosenArea = id\n      var points = this.arr[id].dots\n      this.context.beginPath();\n      this.context.moveTo(points[0].x, points[0].y);\n      for (var i = 0; i < points.length; i++) {\n        this.context.lineTo(points[i].x, points[i].y)\n      }\n      this.context.closePath()\n      this.context.strokeStyle = \"red\"\n      this.context.fillStyle = \"rgba(255,0,170, 0.4)\"\n      this.context.fill();\n      this.context.stroke();\n      this.context.strokeStyle = \"blue\"\n      this.context.fillStyle = \"rgba(0,255,255,0.4)\"\n    },\n    deleteArea(id) {\n      this.arr.splice(id, 1)\n      this.context.clearRect(0, 0, this.rect.width, this.rect.height)\n      this.drawFromArray(this.arr)\n      this.chosenArea = -1\n    },\n    delDrawingArea() {\n      this.points = []\n      this.i = 0\n      this.x = null\n      this.y = null\n      this.isDrawing = false\n\n      this.context.clearRect(0, 0, this.rect.width, this.rect.height)\n      this.drawFromArray(this.arr)\n    },\n    click(e) {\n      var x = e.clientX - this.rect.left\n      var y = e.clientY - this.rect.top\n      if (!this.isDrawing) {\n        if (this.inside({x, y}, this.arr) != -1) {\n          this.choseArea(this.inside({x, y}, this.arr))\n        }\n      } else {\n        this.points.push({x, y})\n        if (this.i == 0) {\n          this.context.beginPath();\n          this.context.moveTo(x, y);\n        }\n        if (this.i > 0) {\n          this.context.lineTo(x, y);\n          this.context.stroke();\n          if (Math.abs(x - this.points[0].x) < 10 && Math.abs(y - this.points[0].y) < 10) {\n            alert('closeArea')\n            this.points.pop()\n            this.closeArea()\n          }\n        }\n        this.i++\n      }\n    },\n    drawFromArray(arr) {\n      var points\n      for (var i = 0; i < arr.length; i++) {\n        points = arr[i].dots\n        this.context.beginPath()\n        this.context.moveTo(points[0].x, points[0].y);\n        for (var j = 1; j < points.length; j++) {\n          var x = points[j].x\n          var y = points[j].y\n          this.context.lineTo(x, y);\n        }\n        this.context.closePath()\n        this.context.fill();\n        this.context.stroke();\n      }\n    },\n    async addController(arr) {\n      this.$router.push({name: 'addController', params: {arr: this.arrPxToProc(arr), id: this.id}})\n    },\n    pxToProcent(x, y) {\n      ;\n      return {'x': Math.round((x / this.rect.width) * 100), 'y': Math.round((y / this.rect.height) * 100)}\n    },\n    procentToPx(x, y) {\n      ;\n      return {'x': x * this.rect.width / 100, 'y': y * this.rect.height / 100}\n    },\n    inside(point, vs) {\n      var x = point.x, y = point.y;\n      var inside = false, points = []\n      for (var k = 0; k < vs.length; k++) {\n        points = vs[k].dots\n        for (var i = 0, j = points.length - 1; i < points.length; j = i++) {\n          var xi = points[i].x, yi = points[i].y;\n          var xj = points[j].x, yj = points[j].y;\n\n          var intersect = ((yi > y) != (yj > y))\n              && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n          if (intersect) inside = !inside;\n        }\n        if (inside) {\n          return k\n        }\n      }\n      return -1\n    },\n    arrPxToProc(arr) {\n      console.log(arr.length)\n      var points, arr1 = [], points2 = [], dot\n      for (var i = 0; i < arr.length; i++) {\n        points = arr[i].dots\n        console.log(points, points.length)\n        for (var j = 0; j < points.length; j++) {\n          dot = this.pxToProcent(points[j].x, points[j].y)\n          points2.push(dot)\n        }\n        arr1.push({'id': i, 'dots': points2})\n        points = null\n      }\n      return arr1\n    },\n    right_click(e) {\n      e.preventDefault();\n      ;\n      var x = e.clientX - this.rect.left\n      var y = e.clientY - this.rect.top;\n      var k = this.inside({x, y}, this.arr)\n      console.log(k)\n      // if (this.context.isPointInPath(x,y)) {\n      //   this.arr.pop()\n      //   this.context.clearRect(0,0,rect.width,rect.height)\n      // }\n      // this.drawFromArray(this.arr)\n    },\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n}\n\n.canvases {\n  position: relative;\n}\n\n.myCanvas {\n  position: absolute;\n  width: 1280px;\n  height: 640px;\n  top: 0px\n}\n</style>"]}]}