{"remainingRequest":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aigul/projects/rtsp_stream_v2/src/views/cameras.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/aigul/projects/rtsp_stream_v2/src/views/cameras.vue","mtime":1614771160996},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/aigul/projects/rtsp_stream_v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyIKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjYW1lcmFzJywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhbWVyYXM6IFtdLAogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q2FtZXJhcygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRDYW1lcmFzKCl7CiAgICAgIGF4aW9zLmdldCgnL2FwaS9jYW1lcmFzJykKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+ICh0aGlzLmNhbWVyYXMgPSByZXNwb25zZS5kYXRhKSk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlQ2FtKGlkKXsKICAgICAgaWYgKGNvbmZpcm0oJ9CS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0YPQtNCw0LvQuNGC0Ywg0LrQsNC80LXRgNGDICcrIGlkKyc/JykpewogICAgICAgIGFsZXJ0KCfQmtCw0LzQtdGA0LAgJysgaWQrJyDRg9C00LDQu9C10L3QsC4nKQogICAgICAgIC8vIGF4aW9zLmRlbGV0ZShgL2FwaS9jYW1lcmFzLyR7aWR9YCkKICAgICAgICAvLyAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKHRoaXMuY2FtZXJhcyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgIC8vICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAvLyAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ29Ub0NhbShpZCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnQ2FtZXJhUGFnZScsIHBhcmFtczoge2lkOiBpZH19KQogICAgfQogIH0KfQo="},{"version":3,"sources":["cameras.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cameras.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"cameras\">\n\n    <b-row>\n      <b-col>\n        <h1 class=\"my-2\">Подключенные камеры</h1>\n      </b-col>\n      <b-col>\n          <b-button variant=\"dark\" class=\"float-right mt-2\" to=\"/addCamera\">Добавить камеру</b-button>\n      </b-col>\n    </b-row>\n    <div v-if=\"cameras.length==0\">\n      <h3>Не найдено ни одной камеры</h3>\n    </div>\n    <div class=\"p-2\">\n      <b-card class=\"cameraStream m-2 p-0\" v-for=\"camera in cameras\" :key=\"camera.id\">\n          <img width=\"420px\" :src=\"'/api/camera/'+camera.id+'/capture'\" v-on:click=\"goToCam(camera.id)\">\n          <b-icon class=\"trash-icon m-0 h5\" variant=\"danger\" icon=\"trash-fill\" v-on:click=\"deleteCam(camera.id)\"/>\n      </b-card>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\"\nexport default {\n  name: 'cameras',\n  data () {\n    return {\n      cameras: [],\n    }\n  },\n  mounted() {\n    this.getCameras()\n  },\n  methods: {\n    async getCameras(){\n      axios.get('/api/cameras')\n          .then(response => (this.cameras = response.data));\n    },\n    async deleteCam(id){\n      if (confirm('Вы уверены, что хотите удалить камеру '+ id+'?')){\n        alert('Камера '+ id+' удалена.')\n        // axios.delete(`/api/cameras/${id}`)\n        //     .then(response => (this.cameras = response.data))\n        //     .catch(function (error) {\n        //           console.log(error);\n        //         });\n      }\n    },\n    async goToCam(id){\n      this.$router.push({name: 'CameraPage', params: {id: id}})\n    }\n  }\n}\n</script>\n\n\n<style>\n.cameraStream{\n  display: inline-block;\n  border: 0;\n  box-shadow: 0 0 10px rgba(0,0,0,0.2);\n  position:relative;\n}\n.card-body{\n  padding: 0.5rem;\n}\n.trash-icon {\n  position:absolute;\n  bottom:20px;\n  right: 20px;\n}\n</style>"]}]}